module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70864,a=>{a.n(a.i(33290))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},28407,a=>{"use strict";let b=(0,a.i(1269).default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);a.s(["AlertTriangle",()=>b],28407)},83627,78454,a=>{"use strict";var b=a.i(1269);let c=(0,b.default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);a.s(["Users",()=>c],83627);let d=(0,b.default)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);a.s(["ArrowUpRight",()=>d],78454)},61749,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call AdminLayout() from the server but AdminLayout is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/admin-layout.tsx <module evaluation>","AdminLayout");a.s(["AdminLayout",0,b])},32332,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call AdminLayout() from the server but AdminLayout is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/admin-layout.tsx","AdminLayout");a.s(["AdminLayout",0,b])},53616,a=>{"use strict";a.i(61749);var b=a.i(32332);a.n(b)},86607,a=>{"use strict";var b=a.i(7997),c=a.i(98310);a.i(70396);var d=a.i(73727),e=a.i(29171),f=a.i(40088),g=a.i(53616);let h=(0,a.i(1269).default)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);var i=a.i(11070),j=a.i(36361),k=a.i(28407),l=a.i(83627),m=a.i(78454);async function n(){let a=await (0,c.createClient)(),{data:{user:n}}=await a.auth.getUser();n||(0,d.redirect)("/auth/login");let{data:o}=await a.from("profiles").select("role").eq("id",n.id).single();o&&"admin"===o.role||(0,d.redirect)("/auth/login");let{data:p}=await a.from("companies").select("*"),{data:q}=await a.from("employees").select("id, status"),{data:r}=await a.from("transactions").select(`
      *,
      employees(full_name),
      companies:company_id(name)
    `).order("created_at",{ascending:!1}).limit(10),s=p?.reduce((a,b)=>a+(b.credit_used||0),0)||0,t=r?.reduce((a,b)=>a+(b.commission||0),0)||0,u=p?.filter(a=>"active"===a.status).length||0,v=p?.length||0,w=q?.length||0,x=q?.filter(a=>"active"===a.status).length||0,y=p?.filter(a=>(a.credit_limit>0?a.credit_used/a.credit_limit*100:0)>=70).map(a=>({company:a.name,percentage:Math.round(a.credit_used/a.credit_limit*100)}))||[],z=r?.map(a=>{var b;let c,d,e,f;return{id:a.id,employee:a.employees?.full_name||"N/A",company:a.companies?.name||"N/A",amount:a.amount,status:"completed"===a.status?"completado":"pending"===a.status?"procesando":a.status,time:(b=new Date(a.created_at),d=Math.floor((c=new Date().getTime()-b.getTime())/6e4),e=Math.floor(c/36e5),f=Math.floor(c/864e5),d<1?"Ahora":d<60?`Hace ${d} min`:e<24?`Hace ${e} hora${e>1?"s":""}`:`Hace ${f} d\xeda${f>1?"s":""}`)}})||[];return(0,b.jsxs)(g.AdminLayout,{children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h2",{className:"mb-4 text-2xl font-bold text-slate-900",children:"Vista Global de Capital"}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Total Colocado"}),(0,b.jsx)(i.DollarSign,{className:"h-4 w-4 text-slate-500"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold",children:["RD$"," ",s>=1e6?`${(s/1e6).toFixed(1)}M`:s.toLocaleString()]}),(0,b.jsxs)("div",{className:"flex items-center text-xs text-emerald-600 mt-1",children:[(0,b.jsx)(m.ArrowUpRight,{className:"w-3 h-3 mr-1"}),"Capital activo"]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Ingresos Comisiones"}),(0,b.jsx)(j.TrendingUp,{className:"h-4 w-4 text-emerald-500"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsxs)("div",{className:"text-2xl font-bold text-emerald-600",children:["RD$"," ",t>=1e6?`${(t/1e6).toFixed(2)}M`:t.toLocaleString()]}),(0,b.jsxs)("div",{className:"flex items-center text-xs text-emerald-600 mt-1",children:[(0,b.jsx)(m.ArrowUpRight,{className:"w-3 h-3 mr-1"}),"Total acumulado"]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Empresas Activas"}),(0,b.jsx)(h,{className:"h-4 w-4 text-blue-500"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:u}),(0,b.jsxs)("p",{className:"text-xs text-slate-500",children:["De ",v," totales"]})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium",children:"Total Colaboradores"}),(0,b.jsx)(l.Users,{className:"h-4 w-4 text-purple-500"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:w.toLocaleString()}),(0,b.jsxs)("p",{className:"text-xs text-slate-500",children:[x," activos"]})]})]}),(0,b.jsxs)(e.Card,{className:"border-emerald-200 bg-emerald-50",children:[(0,b.jsxs)(e.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(e.CardTitle,{className:"text-sm font-medium text-emerald-900",children:"Tasa de Mora"}),(0,b.jsx)(k.AlertTriangle,{className:"h-4 w-4 text-emerald-600"})]}),(0,b.jsxs)(e.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-emerald-700",children:"0.0%"}),(0,b.jsx)("p",{className:"text-xs text-emerald-700",children:"Métrica crucial"})]})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 mb-8",children:[(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{className:"text-lg",children:"Actividad del Mes"})}),(0,b.jsxs)(e.CardContent,{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"text-center p-4 bg-slate-50 rounded-lg",children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-slate-900",children:r?.length||0}),(0,b.jsx)("div",{className:"text-sm text-slate-500",children:"Retiros Procesados"})]}),(0,b.jsxs)("div",{className:"text-center p-4 bg-slate-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"text-3xl font-bold text-slate-900",children:["RD$"," ",r&&r.length>0?Math.round(r.reduce((a,b)=>a+b.amount,0)/r.length).toLocaleString():0]}),(0,b.jsx)("div",{className:"text-sm text-slate-500",children:"Promedio por Retiro"})]})]})]}),y.length>0&&(0,b.jsxs)(e.Card,{className:"border-amber-200 bg-amber-50",children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2 text-amber-900",children:[(0,b.jsx)(k.AlertTriangle,{className:"h-5 w-5"}),"Alertas del Sistema"]}),(0,b.jsx)(e.CardDescription,{className:"text-amber-800",children:"Empresas que requieren atención"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("div",{className:"space-y-2",children:y.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2 rounded-lg bg-white p-3 text-sm",children:[(0,b.jsx)(k.AlertTriangle,{className:"h-4 w-4 text-amber-600"}),(0,b.jsxs)("span",{className:"text-slate-700",children:[(0,b.jsx)("strong",{children:a.company})," alcanzó el ",a.percentage,"% de su límite."]})]},c))})})]}),0===y.length&&(0,b.jsxs)(e.Card,{className:"border-emerald-200 bg-emerald-50",children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsxs)(e.CardTitle,{className:"flex items-center gap-2 text-emerald-900",children:[(0,b.jsx)(j.TrendingUp,{className:"h-5 w-5"}),"Todo en Orden"]}),(0,b.jsx)(e.CardDescription,{className:"text-emerald-800",children:"No hay alertas pendientes"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsx)("p",{className:"text-sm text-emerald-700",children:"Todas las empresas están operando dentro de sus límites de crédito."})})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Transacciones Recientes"}),(0,b.jsx)(e.CardDescription,{children:"Últimos retiros procesados en la plataforma"})]}),(0,b.jsx)(e.CardContent,{children:z.length>0?(0,b.jsx)("div",{className:"space-y-4",children:z.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center",children:(0,b.jsx)(i.DollarSign,{className:"w-5 h-5 text-emerald-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.employee}),(0,b.jsx)("div",{className:"text-sm text-slate-500",children:a.company})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:"font-bold",children:["RD$ ",a.amount.toLocaleString()]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.Badge,{variant:"completado"===a.status?"default":"secondary",className:"completado"===a.status?"bg-emerald-100 text-emerald-700":"bg-yellow-100 text-yellow-700",children:a.status}),(0,b.jsx)("span",{className:"text-xs text-slate-400",children:a.time})]})]})]},a.id))}):(0,b.jsxs)("div",{className:"text-center py-8 text-slate-500",children:[(0,b.jsx)(i.DollarSign,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),(0,b.jsx)("p",{children:"No hay transacciones recientes"})]})})]})]})}a.s(["default",()=>n],86607)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__6e0a337a._.js.map