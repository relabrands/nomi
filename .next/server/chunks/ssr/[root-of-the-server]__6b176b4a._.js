module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70864,a=>{a.n(a.i(33290))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},56603,a=>{"use strict";let b=(0,a.i(1269).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],56603)},83627,78454,a=>{"use strict";var b=a.i(1269);let c=(0,b.default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);a.s(["Users",()=>c],83627);let d=(0,b.default)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);a.s(["ArrowUpRight",()=>d],78454)},13678,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call HRLayout() from the server but HRLayout is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/hr-layout.tsx <module evaluation>","HRLayout");a.s(["HRLayout",0,b])},2774,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call HRLayout() from the server but HRLayout is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/components/hr-layout.tsx","HRLayout");a.s(["HRLayout",0,b])},56501,a=>{"use strict";a.i(13678);var b=a.i(2774);a.n(b)},30466,a=>{"use strict";var b=a.i(7997),c=a.i(98310);a.i(70396);var d=a.i(73727),e=a.i(29171),f=a.i(40088),g=a.i(56501),h=a.i(11070),i=a.i(83627),j=a.i(36361),k=a.i(56603),l=a.i(78454);async function m(){let a=await (0,c.createClient)(),{data:{user:m}}=await a.auth.getUser();m||(0,d.redirect)("/auth/login");let{data:n}=await a.from("profiles").select("role, company_id").eq("id",m.id).single();n&&("hr"===n.role||"admin"===n.role)||(0,d.redirect)("/auth/login");let{data:o}=await a.from("companies").select("*").eq("id",n.company_id).single(),{data:p}=await a.from("employees").select("*").eq("company_id",n.company_id),{data:q}=await a.from("transactions").select(`
      *,
      employees(full_name)
    `).eq("company_id",n.company_id).order("created_at",{ascending:!1}).limit(10),r=p?.reduce((a,b)=>a+(b.total_withdrawn||0),0)||0,s=p?.reduce((a,b)=>a+(b.salary||0),0)||0,t=p?.length||0,u=p?.filter(a=>"active"===a.status).length||0,v=q?.length||0,w=q&&q.length>0?Math.round(q.reduce((a,b)=>a+b.amount,0)/q.length):0,x=q?.map(a=>{var b;let c,d,e,f;return{id:a.id,employee:a.employees?.full_name||"N/A",amount:a.amount,status:"completed"===a.status?"completado":"pending"===a.status?"procesando":a.status,time:(b=new Date(a.created_at),d=Math.floor((c=new Date().getTime()-b.getTime())/6e4),e=Math.floor(c/36e5),f=Math.floor(c/864e5),d<1?"Ahora":d<60?`Hace ${d} min`:e<24?`Hace ${e} hora${e>1?"s":""}`:`Hace ${f} d\xeda${f>1?"s":""}`)}})||[];return(0,b.jsxs)(g.HRLayout,{children:[(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-8",children:[(0,b.jsx)(e.Card,{className:"border-slate-200",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-600",children:"Capital Desplegado"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-slate-900 mt-1",children:["RD$"," ",r>=1e6?`${(r/1e6).toFixed(1)}M`:r>=1e3?`${(r/1e3).toFixed(0)}K`:r.toLocaleString()]}),(0,b.jsxs)("div",{className:"flex items-center text-xs text-emerald-600 mt-1",children:[(0,b.jsx)(l.ArrowUpRight,{className:"w-3 h-3 mr-1"}),"Total retirado"]})]}),(0,b.jsx)("div",{className:"bg-emerald-100 p-3 rounded-full",children:(0,b.jsx)(h.DollarSign,{className:"w-6 h-6 text-emerald-600"})})]})})}),(0,b.jsx)(e.Card,{className:"border-slate-200",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-600",children:"Nómina Total"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-slate-900 mt-1",children:["RD$"," ",s>=1e6?`${(s/1e6).toFixed(2)}M`:s.toLocaleString()]})]}),(0,b.jsx)("div",{className:"bg-blue-100 p-3 rounded-full",children:(0,b.jsx)(j.TrendingUp,{className:"w-6 h-6 text-blue-600"})})]})})}),(0,b.jsx)(e.Card,{className:"border-slate-200",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-600",children:"Colaboradores"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-slate-900 mt-1",children:t}),(0,b.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:[u," activos"]})]}),(0,b.jsx)("div",{className:"bg-purple-100 p-3 rounded-full",children:(0,b.jsx)(i.Users,{className:"w-6 h-6 text-purple-600"})})]})})}),(0,b.jsx)(e.Card,{className:"border-slate-200",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-slate-600",children:"Retiros del Mes"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-slate-900 mt-1",children:v}),(0,b.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["Prom: RD$ ",w.toLocaleString()]})]}),(0,b.jsx)("div",{className:"bg-amber-100 p-3 rounded-full",children:(0,b.jsx)(k.Clock,{className:"w-6 h-6 text-amber-600"})})]})})})]}),o&&(0,b.jsx)(e.Card,{className:"mb-8 border-emerald-200 bg-emerald-50",children:(0,b.jsx)(e.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-emerald-900",children:o.name}),(0,b.jsx)("p",{className:"text-sm text-emerald-700",children:"Plan Premium - Comisión RD$75 por retiro"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,b.jsxs)(f.Badge,{className:"bg-emerald-100 text-emerald-700 border-emerald-200",children:["Porcentaje Retiro: ",o.availability_percentage||50,"%"]}),(0,b.jsxs)(f.Badge,{className:"bg-emerald-100 text-emerald-700 border-emerald-200",children:["Frecuencia:"," ","weekly"===o.payment_frequency?"Semanal":"biweekly"===o.payment_frequency?"Quincenal":"Mensual"]})]})]})})}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"Actividad Reciente"}),(0,b.jsx)(e.CardDescription,{children:"Últimos retiros de sus colaboradores"})]}),(0,b.jsx)(e.CardContent,{children:x.length>0?(0,b.jsx)("div",{className:"space-y-4",children:x.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center",children:(0,b.jsx)(h.DollarSign,{className:"w-5 h-5 text-emerald-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.employee}),(0,b.jsx)("div",{className:"text-sm text-slate-500",children:a.time})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:"font-bold",children:["RD$ ",a.amount.toLocaleString()]}),(0,b.jsx)(f.Badge,{className:"completado"===a.status?"bg-emerald-100 text-emerald-700":"bg-yellow-100 text-yellow-700",children:a.status})]})]},a.id))}):(0,b.jsxs)("div",{className:"text-center py-8 text-slate-500",children:[(0,b.jsx)(h.DollarSign,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),(0,b.jsx)("p",{children:"No hay retiros recientes"})]})})]})]})}a.s(["default",()=>m])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__6b176b4a._.js.map